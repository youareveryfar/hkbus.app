import{q as G,s as F,t as $,x as l,w as O,a2 as je,a3 as Ee,_ as V,a4 as fe,a5 as Se,a6 as Me,y as k,z as H,a7 as se,P as ze,a8 as Le,a9 as De,A as Ne,aa as te,ab as E,ac as re,ad as ke,ae as Ie,af as Be,b as S,e as me}from"./App-heRoAE-M.js";import{r as x,j as n,b as ge,u as be,e as he,D as _e,A as We,o as Ue,m as qe}from"./index-BZAXjjD_.js";import{C as Ge}from"./CircularProgress-BJX6oDjs.js";function Fe(e){return G("MuiCollapse",e)}F("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Oe=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Ve=e=>{const{orientation:t,classes:r}=e,o={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return H(o,Fe,r)},He=$("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.orientation],r.state==="entered"&&t.entered,r.state==="exited"&&!r.in&&r.collapsedSize==="0px"&&t.hidden]}})(({theme:e,ownerState:t})=>l({height:0,overflow:"hidden",transition:e.transitions.create("height")},t.orientation==="horizontal"&&{height:"auto",width:0,transition:e.transitions.create("width")},t.state==="entered"&&l({height:"auto",overflow:"visible"},t.orientation==="horizontal"&&{width:"auto"}),t.state==="exited"&&!t.in&&t.collapsedSize==="0px"&&{visibility:"hidden"})),Ke=$("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>l({display:"flex",width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),Je=$("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})(({ownerState:e})=>l({width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),xe=x.forwardRef(function(t,r){const o=O({props:t,name:"MuiCollapse"}),{addEndListener:c,children:b,className:p,collapsedSize:d="0px",component:s,easing:y,in:u,onEnter:f,onEntered:m,onEntering:v,onExit:h,onExited:i,onExiting:g,orientation:C="vertical",style:w,timeout:P=je.standard,TransitionComponent:B=Ee}=o,Q=V(o,Oe),z=l({},o,{orientation:C,collapsedSize:d}),A=Ve(z),_=fe(),Y=Se(),T=x.useRef(null),W=x.useRef(),L=typeof d=="number"?`${d}px`:d,M=C==="horizontal",U=M?"width":"height",K=x.useRef(null),Ce=Me(r,K),D=a=>R=>{if(a){const j=K.current;R===void 0?a(j):a(j,R)}},Z=()=>T.current?T.current[M?"clientWidth":"clientHeight"]:0,ye=D((a,R)=>{T.current&&M&&(T.current.style.position="absolute"),a.style[U]=L,f&&f(a,R)}),Re=D((a,R)=>{const j=Z();T.current&&M&&(T.current.style.position="");const{duration:q,easing:J}=se({style:w,timeout:P,easing:y},{mode:"enter"});if(P==="auto"){const ne=_.transitions.getAutoHeightDuration(j);a.style.transitionDuration=`${ne}ms`,W.current=ne}else a.style.transitionDuration=typeof q=="string"?q:`${q}ms`;a.style[U]=`${j}px`,a.style.transitionTimingFunction=J,v&&v(a,R)}),$e=D((a,R)=>{a.style[U]="auto",m&&m(a,R)}),we=D(a=>{a.style[U]=`${Z()}px`,h&&h(a)}),Pe=D(i),Ae=D(a=>{const R=Z(),{duration:j,easing:q}=se({style:w,timeout:P,easing:y},{mode:"exit"});if(P==="auto"){const J=_.transitions.getAutoHeightDuration(R);a.style.transitionDuration=`${J}ms`,W.current=J}else a.style.transitionDuration=typeof j=="string"?j:`${j}ms`;a.style[U]=L,a.style.transitionTimingFunction=q,g&&g(a)}),Te=a=>{P==="auto"&&Y.start(W.current||0,a),c&&c(K.current,a)};return n.jsx(B,l({in:u,onEnter:ye,onEntered:$e,onEntering:Re,onExit:we,onExited:Pe,onExiting:Ae,addEndListener:Te,nodeRef:K,timeout:P==="auto"?null:P},Q,{children:(a,R)=>n.jsx(He,l({as:s,className:k(A.root,p,{entered:A.entered,exited:!u&&L==="0px"&&A.hidden}[a]),style:l({[M?"minWidth":"minHeight"]:L},w),ref:Ce},R,{ownerState:l({},z,{state:a}),children:n.jsx(Ke,{ownerState:l({},z,{state:a}),className:A.wrapper,ref:T,children:n.jsx(Je,{ownerState:l({},z,{state:a}),className:A.wrapperInner,children:b})})}))}))});xe.muiSupportAuto=!0;const Xe=xe,ve=x.createContext({});function Qe(e){return G("MuiAccordion",e)}const Ye=F("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),X=Ye,Ze=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],et=e=>{const{classes:t,square:r,expanded:o,disabled:c,disableGutters:b}=e;return H({root:["root",!r&&"rounded",o&&"expanded",c&&"disabled",!b&&"gutters"],region:["region"]},Qe,t)},tt=$(ze,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${X.region}`]:t.region},t.root,!r.square&&t.rounded,!r.disableGutters&&t.gutters]}})(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],t),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${X.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${X.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}},({theme:e,ownerState:t})=>l({},!t.square&&{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},!t.disableGutters&&{[`&.${X.expanded}`]:{margin:"16px 0"}})),rt=x.forwardRef(function(t,r){const o=O({props:t,name:"MuiAccordion"}),{children:c,className:b,defaultExpanded:p=!1,disabled:d=!1,disableGutters:s=!1,expanded:y,onChange:u,square:f=!1,slots:m={},slotProps:v={},TransitionComponent:h,TransitionProps:i}=o,g=V(o,Ze),[C,w]=Le({controlled:y,default:p,name:"Accordion",state:"expanded"}),P=x.useCallback(M=>{w(!C),u&&u(M,!C)},[C,u,w]),[B,...Q]=x.Children.toArray(c),z=x.useMemo(()=>({expanded:C,disabled:d,disableGutters:s,toggle:P}),[C,d,s,P]),A=l({},o,{square:f,disabled:d,disableGutters:s,expanded:C}),_=et(A),Y=l({transition:h},m),T=l({transition:i},v),[W,L]=De("transition",{elementType:Xe,externalForwardedProps:{slots:Y,slotProps:T},ownerState:A});return n.jsxs(tt,l({className:k(_.root,b),ref:r,ownerState:A,square:f},g,{children:[n.jsx(ve.Provider,{value:z,children:B}),n.jsx(W,l({in:C,timeout:"auto"},L,{children:n.jsx("div",{"aria-labelledby":B.props.id,id:B.props["aria-controls"],role:"region",className:_.region,children:Q})}))]}))}),Dt=rt;function ot(e){return G("MuiAccordionDetails",e)}F("MuiAccordionDetails",["root"]);const nt=["className"],st=e=>{const{classes:t}=e;return H({root:["root"]},ot,t)},at=$("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({padding:e.spacing(1,2,2)})),it=x.forwardRef(function(t,r){const o=O({props:t,name:"MuiAccordionDetails"}),{className:c}=o,b=V(o,nt),p=o,d=st(p);return n.jsx(at,l({className:k(d.root,c),ref:r,ownerState:p},b))}),Nt=it;function lt(e){return G("MuiAccordionSummary",e)}const ct=F("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),N=ct,dt=["children","className","expandIcon","focusVisibleClassName","onClick"],ut=e=>{const{classes:t,expanded:r,disabled:o,disableGutters:c}=e;return H({root:["root",r&&"expanded",o&&"disabled",!c&&"gutters"],focusVisible:["focusVisible"],content:["content",r&&"expanded",!c&&"contentGutters"],expandIconWrapper:["expandIconWrapper",r&&"expanded"]},lt,t)},pt=$(Ne,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{const r={duration:e.transitions.duration.shortest};return l({display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],r),[`&.${N.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${N.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${N.disabled})`]:{cursor:"pointer"}},!t.disableGutters&&{[`&.${N.expanded}`]:{minHeight:64}})}),ft=$("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e,ownerState:t})=>l({display:"flex",flexGrow:1,margin:"12px 0"},!t.disableGutters&&{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${N.expanded}`]:{margin:"20px 0"}})),mt=$("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${N.expanded}`]:{transform:"rotate(180deg)"}})),gt=x.forwardRef(function(t,r){const o=O({props:t,name:"MuiAccordionSummary"}),{children:c,className:b,expandIcon:p,focusVisibleClassName:d,onClick:s}=o,y=V(o,dt),{disabled:u=!1,disableGutters:f,expanded:m,toggle:v}=x.useContext(ve),h=C=>{v&&v(C),s&&s(C)},i=l({},o,{expanded:m,disabled:u,disableGutters:f}),g=ut(i);return n.jsxs(pt,l({focusRipple:!1,disableRipple:!0,disabled:u,component:"div","aria-expanded":m,className:k(g.root,b),focusVisibleClassName:k(g.focusVisible,d),onClick:h,ref:r,ownerState:i},y,{children:[n.jsx(ft,{className:g.content,ownerState:i,children:c}),p&&n.jsx(mt,{className:g.expandIconWrapper,ownerState:i,children:p})]}))}),kt=gt;function bt(e){return G("MuiLinearProgress",e)}F("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const ht=["className","color","value","valueBuffer","variant"];let I=e=>e,ae,ie,le,ce,de,ue;const ee=4,xt=te(ae||(ae=I`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),vt=te(ie||(ie=I`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),Ct=te(le||(le=I`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),yt=e=>{const{classes:t,variant:r,color:o}=e,c={root:["root",`color${E(o)}`,r],dashed:["dashed",`dashedColor${E(o)}`],bar1:["bar",`barColor${E(o)}`,(r==="indeterminate"||r==="query")&&"bar1Indeterminate",r==="determinate"&&"bar1Determinate",r==="buffer"&&"bar1Buffer"],bar2:["bar",r!=="buffer"&&`barColor${E(o)}`,r==="buffer"&&`color${E(o)}`,(r==="indeterminate"||r==="query")&&"bar2Indeterminate",r==="buffer"&&"bar2Buffer"]};return H(c,bt,t)},oe=(e,t)=>t==="inherit"?"currentColor":e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:e.palette.mode==="light"?ke(e.palette[t].main,.62):Ie(e.palette[t].main,.5),Rt=$("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`color${E(r.color)}`],t[r.variant]]}})(({ownerState:e,theme:t})=>l({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:oe(t,e.color)},e.color==="inherit"&&e.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},e.variant==="buffer"&&{backgroundColor:"transparent"},e.variant==="query"&&{transform:"rotate(180deg)"})),$t=$("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.dashed,t[`dashedColor${E(r.color)}`]]}})(({ownerState:e,theme:t})=>{const r=oe(t,e.color);return l({position:"absolute",marginTop:0,height:"100%",width:"100%"},e.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${r} 0%, ${r} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},re(ce||(ce=I`
    animation: ${0} 3s infinite linear;
  `),Ct)),wt=$("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.bar,t[`barColor${E(r.color)}`],(r.variant==="indeterminate"||r.variant==="query")&&t.bar1Indeterminate,r.variant==="determinate"&&t.bar1Determinate,r.variant==="buffer"&&t.bar1Buffer]}})(({ownerState:e,theme:t})=>l({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.variant==="determinate"&&{transition:`transform .${ee}s linear`},e.variant==="buffer"&&{zIndex:1,transition:`transform .${ee}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&re(de||(de=I`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),xt)),Pt=$("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.bar,t[`barColor${E(r.color)}`],(r.variant==="indeterminate"||r.variant==="query")&&t.bar2Indeterminate,r.variant==="buffer"&&t.bar2Buffer]}})(({ownerState:e,theme:t})=>l({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},e.variant!=="buffer"&&{backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.color==="inherit"&&{opacity:.3},e.variant==="buffer"&&{backgroundColor:oe(t,e.color),transition:`transform .${ee}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&re(ue||(ue=I`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),vt)),At=x.forwardRef(function(t,r){const o=O({props:t,name:"MuiLinearProgress"}),{className:c,color:b="primary",value:p,valueBuffer:d,variant:s="indeterminate"}=o,y=V(o,ht),u=l({},o,{color:b,variant:s}),f=yt(u),m=fe(),v={},h={bar1:{},bar2:{}};if((s==="determinate"||s==="buffer")&&p!==void 0){v["aria-valuenow"]=Math.round(p),v["aria-valuemin"]=0,v["aria-valuemax"]=100;let i=p-100;m.direction==="rtl"&&(i=-i),h.bar1.transform=`translateX(${i}%)`}if(s==="buffer"&&d!==void 0){let i=(d||0)-100;m.direction==="rtl"&&(i=-i),h.bar2.transform=`translateX(${i}%)`}return n.jsxs(Rt,l({className:k(f.root,c),ownerState:u,role:"progressbar"},v,{ref:r},y,{children:[s==="buffer"?n.jsx($t,{className:f.dashed,ownerState:u}):null,n.jsx(wt,{className:f.bar1,ownerState:u,style:h.bar1}),s==="determinate"?null:n.jsx(Pt,{className:f.bar2,ownerState:u,style:h.bar2})]}))}),Tt=At,jt=ge.forwardRef(({sx:e,color:t,...r},o)=>n.jsx(Tt,{color:t??"inherit",sx:{m:1,height:5,borderRadius:5,...e},ref:o,...r})),It=ge.forwardRef(({sx:e,color:t,...r},o)=>n.jsx(Ge,{color:t??"inherit",sx:{m:1,...e},ref:o,...r})),Bt=({routeId:e,seq:t,containerSx:r,showStopName:o=!1})=>{const{t:c}=be(),b=he(),{db:{routeList:p,stopList:d}}=x.useContext(_e),s=Be(`${e}/${t}`),{route:y,co:u,stops:f}=p[e],m=Object.values(f)[0][t],v=x.useMemo(()=>Object.values(p[e].stops).map(i=>d[i[i.length-1]].name).concat(p[e].dest),[p,e,d]),h=x.useMemo(()=>{let i=!1;return u[0]==="mtr"?i=f.mtr.indexOf(m)+1>=f.mtr.length:u.includes("lightRail")&&(i=f.lightRail.indexOf(m)+1>=f.lightRail.length),s===null?null:i&&s.length===0?c("終點站"):s.length>0&&s.every(g=>!g.eta)&&s[0].remark[b]?s[0].remark[b]:s.length===0||s.every(g=>!g.eta)?c("未有班次資料"):null},[s,u,f,m,c,b]);return s==null?n.jsx(S,{sx:r,children:n.jsx(jt,{})}):n.jsxs(S,{sx:r,children:[o&&n.jsx(me,{variant:"caption",children:d[m].name[b]}),h,s.length>0&&s.every(i=>i.eta)&&s.map((i,g)=>n.jsx(Et,{eta:i,routeDests:v,showCompany:u.length>1,route:y},`route-${g}`))]})},Et=({eta:{eta:e,remark:t,co:r,dest:o},routeDests:c,showCompany:b,route:p})=>{const{t:d}=be(),s=he(),{etaFormat:y,platformMode:u}=x.useContext(We),f=x.useMemo(()=>{if(r==="mtr")return!0;for(const w of c)if(w.en.toLowerCase()===o.en.toLowerCase()||w.zh===o.zh)return!1;return!0},[c,o,r]),m=Math.round((new Date(e).getTime()-new Date().getTime())/60/1e3),v=n.jsx(S,{component:"span",sx:y!=="exact"?{fontSize:"0.9em"}:{},children:e.slice(11,16)}),h=r==="mtr"||r==="lightRail";let i,g;h&&m<=1?(i=m===1?`${d("即將抵達")} `:`${d("正在離開")} `,g=!0):(i=m<1?" - ":`${m} `,g=!1);const C=n.jsxs(S,{component:"span",children:[n.jsx(S,{component:"span",sx:{...St,color:w=>w.palette.warning.main},fontSize:g?"0.9em":void 0,children:i}),!g&&n.jsx(S,{component:"span",sx:{fontSize:"0.8em"},children:d("分鐘")})]});return n.jsxs(me,{variant:"subtitle1",children:[y==="diff"&&C,y==="exact"&&v,y==="mixed"&&n.jsxs(n.Fragment,{children:[v," ",C]}),!h&&n.jsx(n.Fragment,{children:" - "}),n.jsxs(S,{component:"span",sx:{fontSize:"0.8em",textOverflow:"ellipsis"},children:[b&&n.jsxs(n.Fragment,{children:[" ",d(r)]})," ",h?n.jsx(S,{component:"span",color:Ue([r],p,!0),children:pe(t[s],s,u)}):pe(t[s],s,u),h&&" ",!h&&n.jsx(n.Fragment,{children:" "}),f&&o[s]]})]})},pe=(e,t,r)=>{if(e===null)return"";const o=[...e.matchAll(t==="zh"?/(\d+)號月台/g:/Platform (\d+)/g)][0]||[];return o.length===2&&o[1].length&&(e=qe(Number(o[1]),r)),t==="zh"?e.replace(/▭▭/g,"雙卡").replace(/▭/g,"單卡"):e.replace(/▭▭/g,"Duel").replace(/▭/g,"Single")},St={fontWeight:"700",color:"#088bce"};export{Dt as A,It as C,jt as L,Bt as T,kt as a,Nt as b};
